# @package _global_

defaults:
  - /system: encoder_train.yaml
  # override
  # system config
  - /system/encoder_config: "gps/gnn.yaml"
  - /system/task_head_configs: gps/task_head_default/TDC/cyp2c9_veith.yaml
  - /system/optimizer_configs: paper_finetuning.yaml
  # train config
  - override /trainer:
      [
        "default",
        "accelerator/gpu",
        "devices/2",
        "max_steps/2k",
        "accumulate_grad_batches/4",
      ]

  - override /callbacks: default.yaml
  - override /datamodule: [gps/multidata_default.yaml, gps/dataset_configs/TDC/cyp2c9_veith/v1_0_0]
  - override /logger: ["csv", "wandb"]
callbacks:
  model_checkpoint:
    monitor: val/BinaryAveragePrecision/cyp2c9_veith.cyp2c9_veith
    mode: max
trainer:
  devices: 1
  max_epochs: 5
  max_steps: -1
  accumulate_grad_batches: 1
  log_every_n_steps: 2
  val_check_interval: 2
datamodule:
  batch_size: 16
logger:
  wandb_logger:
    project: "ADMET_finetuning"
# all parameters below will be merged with parameters from default configurations set above
# this allows you to overwrite only specified parameters
name: gps_PTNAME_finetuning_cyp2c9_veith
seed: 8282
system:
  checkpoint_path: /db2/users/jungwookim/projects/admet_prediction/outputs/train/runs/gps_MT0/2023-07-24/12-25-37/checkpoints/checkpoint_000002820.ckpt

  frozen_modules:
    - encoder


  # encoder_config:
  #   state_path: /db2/users/jungwookim/projects/admet_prediction/outputs/train/runs/gps_MT0/2023-07-24/12-25-37/checkpoints/checkpoint_000002820/encoder.pt



  task_head_configs:
    cyp2c9_veith:
      weight: 1

